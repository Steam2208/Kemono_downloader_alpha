#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
üîß –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ v2.8.2
========================================================
–ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –æ–±—ã—á–Ω—ã–µ —Ñ–∞–π–ª—ã —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
"""

import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –Ω–∞—à–∏–º –º–æ–¥—É–ª—è–º
sys.path.append('.')

from downloader_static import get_post_media

def test_file_return():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ã—á–Ω—ã–µ —Ñ–∞–π–ª—ã"""
    print("üß™ –¢–ï–°–¢: –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–≤—Ä–∞—Ç –æ–±—ã—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ get_post_media")
    print("=" * 60)
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ –ø–æ—Å—Ç–µ –∫–æ—Ç–æ—Ä—ã–π —Ç–æ—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∞–π–ª—ã
    test_url = "https://kemono.cr/patreon/user/804602/post/91974242"  # –≠—Ç–æ—Ç –ø–æ—Å—Ç —Ç–æ—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    
    print(f"üéØ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ—Å—Ç: {test_url}")
    print()
    
    # –ü–æ–ª—É—á–∞–µ–º –º–µ–¥–∏–∞ –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è save_dir (—á—Ç–æ–±—ã –Ω–µ —Å–∫–∞—á–∏–≤–∞—Ç—å –æ–±–ª–∞—á–Ω—ã–µ —Ñ–∞–π–ª—ã)
    media_links = get_post_media(test_url, enhanced_search=True, save_dir=None)
    
    print()
    print("üìä –†–ï–ó–£–õ–¨–¢–ê–¢ –¢–ï–°–¢–ê:")
    print(f"   –í–æ–∑–≤—Ä–∞—â–µ–Ω–æ —Å—Å—ã–ª–æ–∫: {len(media_links) if media_links else 0}")
    
    if media_links:
        print("   ‚úÖ –£–°–ü–ï–•: –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∞–π–ª—ã!")
        print("   üìã –°–ø–∏—Å–æ–∫ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:")
        for i, link in enumerate(media_links, 1):
            filename = link.split('/')[-1].split('?')[0]
            print(f"      {i}. {filename}")
    else:
        print("   ‚ùå –ü–†–û–í–ê–õ: –§—É–Ω–∫—Ü–∏—è –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∞–π–ª—ã!")
    
    print()
    print("=" * 60)
    return len(media_links) > 0 if media_links else False

if __name__ == "__main__":
    success = test_file_return()
    
    if success:
        print("üéâ –¢–ï–°–¢ –ü–†–û–ô–î–ï–ù: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!")
        exit(0)
    else:
        print("üí• –¢–ï–°–¢ –ü–†–û–í–ê–õ–ï–ù: –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ!")
        exit(1)